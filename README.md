# Optimization-tool-POWERBASE
Optimization tool for reducing emissions from energy self-sufficient accommodation in international disaster response operations by implementing photovoltaic generators, wind generators and battery storage systems

## Introduction: 
The following describes the optimization tool for reducing emissions from energy self-sufficient shelters in international disaster response operations developed as a component of the [POWERBASE](https://www.powerbaseproject.eu/) research project, employing the Python programming language. The system's functionality encompasses the configuration and optimization of energy systems within shelters demonstrating energy self-sufficiency, particularly in the context of international disaster relief operations. The system interface employs a graphical user interface, through which users can input pertinent information such as coordinates, transportation logistics, load profiles, and utilization periods. The tool calculates the CO₂ emissions for the actual system (electrical load coverage through the use of diesel generator units) and determines the optimum power output of the diesel generator for the configured energy system. The PV generator, wind generator, and battery storage system are subsequently integrated into the energy system (new system) and optimized with respect to the reduction of CO₂ emissions. The tool calculates the reduction in CO₂ emissions for the new system relative to the existing system without renewable energies, as well as the optimal outputs of the photovoltaic (PV) generator, wind generator, and battery storage system.  The CO₂ emissions resulting from the transportation and operation of energy systems are duly considered in this analysis.

## Getting started:
The following chapter lists the minimum system requirements for the developed optimization tool and describes the workflow for setting up the tool.
Python version 3.8 or higher is required to use the tool. You must also ensure that the following libraries are installed in addition to the [Python standard library](https://docs.python.org/3/library/index.html): 
- [PyPSA](https://pypsa.readthedocs.io/en/latest/getting-started/installation.html)
- [tkcalender](https://tkcalendar.readthedocs.io/en/stable/installation.html)
- [pandas](https://pandas.pydata.org/docs/getting_started/install.html)
- [numPy](https://numpy.org/install/)
- [request](https://pypi.org/project/requests/)
- [HiGHS](https://ergo-code.github.io/HiGHS/dev/interfaces/python/#python-getting-started)

Furthermore, to use the tool, it is necessary to set up an API for querying data records from the renewables.ninja platform. To create the API token required for this, a user profile must be created. The procedure is explained at [Renewables.ninja](https://www.renewables.ninja/documentation/api). The generated API token must then be inserted in line 551 of the program code. Due to the API request, a working internet connection is required during the execution of the optimization tool. Once the required libraries have been installed and the API set up, the optimization tool can be used.  
The tool initially contains the technical data for the diesel generaor unit [ESE 608 DHG ES Diesel DIN Super Silent Plus](https://www.endressparts.com/transfer/Datenblatt/ESE%20608%20DHG%20ES%20Diesel%20DIN%20Super%20Silent%20Plus%20(156312)_DE_0.pdf), the pv module [SolarSaga 500 X](https://www.jackery.com/products/jackery-solarsaga-500-x#product_tab_1), the windturbine [Windcatcher](https://kitex.tech/de/products/windfanger-standard-set-1?variant=48658987188549) and the battery storage system [ESS D 30/30](https://www.endress-zero.com/de/endress_professional). However, these can be adjusted manually in the program code. Please note that floating point numbers are separated by a dot. 

**Diesel generator:** In lines 23-25 of the program code, the active power in kW (`kw_dieselgenerator`), the weight in kg (`kg_diesel_generator`) and the CO₂ emissions in g/kWh (`co2_emissions_diesel_generator`) can be adjusted for the diesel generator unit used.  
**PV generator:** The technical parameters of the PV module used can be adjusted in lines 28-31 of the program code. The peak power in kWp (`kWp_pv_generator`), the weight in kg (`kg_pv_generator`), as well as a maximum power limit and a modular power limit in kWp can be configured. If no maximum power limit is to be set, the text “float(‘inf’)” can be used for the variable `maximum_power_pv_generator`. If no further modular power limit is to be configured, the peak power of the PV module in kWp can be used for the variable `modular_power_pv_generator`. In this way, the tool optimizes the PV generator power.  
**Wind generator:** The wind turbine used can be configured in lines 34-41. The nominal power of the wind turbine in kW (`kW_wind_generator`) and the weight of the wind turbine in kg (`kg_wind_generator`) can be configured. The maximum total power of the wind generator in kW can be set via the variable `maximum_power_wind_generator` and can be canceled by entering “float(‘inf’)”. The modular power limitation in kW is configured via the variable `modular_power_wind_generator`. If no modular power limitation is to be implemented for the wind generator, the nominal power of the wind turbine used can be used for this variable in order to optimize the wind generator in power steps of the configured wind turbine. In addition, the hub height of the wind turbine model used must be specified in meters (`hub_height_wind_generator`) in order to correctly determine the yield for the wind generator. The roughness factor can also be configured manually (`roughness_factor`). This is set to a value of 0.25 and can be adjusted if necessary. The variable `offset_boundary_layer` describes the offset of the boundary layer due to obstacles in meters. This is set to zero; if the distance between the wind turbines and obstacles is small, the value to be entered can be set to 70% of the obstacle height.  
When configuring a wind turbine model that deviates from model named above, the corresponding yield curve must also be stored as a function of the wind speeds for the wind turbine model used. A corresponding yield curve as a function of wind speed can often be found in the manufacturer's specifications for wind turbines. In order to store this correctly in the optimization tool, lines 631-652 of the program code must be adapted according to the yield curve of the wind turbine model used. It is important to note that percentage values (`yield/nominal power`) must be used as yield.  
**Battery storage:** The battery storage system used can be configured in lines 44-49 of the program code. The capacity in kWh (`kwh_battery`), the weight in kg (`kg_battery`), the charging power (`charge_power_battery`) and the discharging power in kW (`discharge_power_battery`) of the battery storage model used must be specified. In addition, a maximum capacity limit for the battery storage can be configured during optimization using the variable `maximum_capacity_battery`. The maximum capacity limit is removed by using "float(‘inf’)". A modular capacity limit is configured using the variable `modular_capacity_battery`. In order to optimize the capacity of the battery storage in steps of the capacity of the battery storage system used, the capacity of the battery storage system used must be stored for this variable.  
**CO₂ factors:** For the calculation of transportation emissions, emission intensity values are used for the four means of transportation truck, plane, ship and train. If necessary, these can be adjusted in lines 52-55 of the program code. Please note that the emission intensity values are given in the unit g CO₂e/tkm. Further emission intensity values can be found in the literature, for example in the “Global Logistics Emissions Council Framework for Logistics Emissions” of the [Smart Freight Center](https://smart-freight-centre-media.s3.amazonaws.com/documents/GLEC_FRAMEWORK_v3_UPDATED_02_04_24.pdf).

## Input
As the framework conditions of energy self-sufficient shelters in international disaster relief operations vary depending on the mission, these are configured by the user using input fields on the GUI. The input mask created for the optimization tool is shown in Figure 1. The graphical user interface is implemented in lines 902-1228 of the program code.  
![Imput mask of the optimization tool](https://github.com/user-attachments/assets/db09fb72-1b51-4238-9393-3a9a8ce5daa9)
Figure 1: Input mask of the optimization tool

To optimize a BoO energy system with the tool, the following entries must first be made:  

**1.	Coordinates:** Users can enter the location coordinates of the operating location using two labeled input fields (Figure 1, top left). The longitude and latitude of the planned location are each entered in a separate input field. The coordinates are then used to query the location-specific weather data.  
**2.	Transport:** Users can enter the transport kilometers via four labeled input fields (Figure 1, top center). The transport kilometers are specified separately for the various means of transport: aircraft, ship, truck and train. As the actual route data is only available after the transport, the shortest feasible distances of the respective means of transport can be used for planned operations in accordance with the EN ISO 14083 standard. The transport kilometers for the named means of transport are also used to determine the CO₂ emissions for the transport of BoO components. When specifying the transport kilometers, the return transport should also be taken into account if possible.  
**3.	Loadprofile:** Users can enter the load profile using labeled input fields and buttons that can be activated (Figure 1, center). A total of ten electrical loads can be named via input fields and an electrical power can be entered for each load. In addition, a time usage profile is defined for each defined load for the hours of a day. This is realized by selecting 24 buttons that can be activated and is to be carried out by the user on an application-specific basis. It should be noted that each of the buttons that can be activated applies to the specified hour of the day. It is therefore assumed that by activating a button, the specified electrical power of the corresponding load is available for the entire activated hour of a day.  
**4.	Period of use:** The operating period is entered by selecting the start and end date using two calendar interfaces of the tkcalender module (Figure 1, below). It should be noted that the selected start and end dates are included in the operating period. The operating period therefore starts at 12:00 on the selected start date and ends at 23:59 on the selected end date. In addition, the maximum possible operating period is one year. The end date must also not be before the start date. The operating period entered is then used for energy simulation and optimization, as well as for filtering the imported datasets.

The "Scenario 1", "Scenario 2" or "Scenario 3" selection boxes (see Figure 1, top center) automatically fill in the input mask with predefined input data sets. The three predefined input data sets are based on the [application scenarios for BoO defined in POWERBASE](https://www.powerbaseproject.eu/wp-content/uploads/Powerbase-D2.1-Scenario-Definition-Final.pdf). The scenarios are a forest fire scenario in summer on a Mediterranean island (Scenario 1), a flood disaster in winter in Central Europe (Scenario 2) and an earthquake in a rural Himalayan region (Scenario 3). The entries that can be selected for the three scenarios are there to help users and make it easier to understand the input mask. The "custom" option is already selected. If this box is ticked, the entries for the application-specific framework conditions that were described earlier will stay blank. These entries will need to be filled in by the users themselves. The input data for the three scenarios is predefined in lines 68-272 of the program code.

## License:
This Software is provided under the Creative Commons Attribution 4.0 International license (CC-BY 4.0)
